# Vagrant конфігурація для створення віртуальних машин
Vagrant.configure("2") do |config|
  # Налаштування віртуальної машини для Linux
  config.vm.define "linux_vm" do |linux|
    linux.vm.box = "ubuntu/bionic64" # Образ Ubuntu
    linux.vm.hostname = "lab-linux" # Ім'я хосту
    linux.vm.network "private_network", type: "dhcp" # Приватна мережа

    # Скрипт для встановлення необхідного програмного забезпечення
    linux.vm.provision "shell", inline: <<-SHELL
      # Оновлення та встановлення .NET SDK
      sudo apt-get update
      sudo apt-get install -y dotnet-sdk-8.0
      
      # Додавання репозиторію для nuget
      curl -sSL https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
      sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
      sudo apt-add-repository https://packages.microsoft.com/ubuntu/20.04/prod
      sudo apt-get update
      sudo apt-get install -y nuget
    SHELL
  end

  # Налаштування віртуальної машини для MacOS
  config.vm.define "mac_vm" do |mac|
    mac.vm.box = "generic/macos12" # Образ MacOS
    mac.vm.hostname = "lab-mac" # Ім'я хосту

    # Скрипт для встановлення .NET SDK та nuget
    mac.vm.provision "shell", inline: <<-SHELL
      brew install dotnet-sdk
      brew install nuget
    SHELL
  end

  # Налаштування віртуальної машини для Windows
  config.vm.define "windows_vm" do |windows|
    windows.vm.box = "generic/windows10" # Образ Windows 10
    windows.vm.hostname = "lab-windows" # Ім'я хосту

    # Скрипт для встановлення .NET SDK та nuget через Chocolatey
    windows.vm.provision "shell", inline: <<-SHELL
      choco install dotnet-sdk
      choco install nuget.commandline
    SHELL
  end
end
